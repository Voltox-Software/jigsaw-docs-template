<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <title>My Blog About Jigsaws | Auto-Tuned Façades in Laravel 97</title>

        <link rel="home" href="https://tightenco.github.io/jigsaw-blog-skeleton/">
        <link href="https://tightenco.github.io/jigsaw-blog-skeleton/blog/feed.atom" type="application/atom+xml" rel="alternate" title="My Blog About Jigsaws Atom Feed">
        <link rel="icon" href="https://tightenco.github.io/jigsaw-blog-skeleton/favicon.ico">

            <meta property="og:title" content="Auto-Tuned Façades in Laravel 97" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://tightenco.github.io/jigsaw-blog-skeleton/blog/auto-tuned-facades-in-laravel-97"/>
    <meta property="og:description" content="Laravel 97&#039;s auto-tuned façades." />

                    <!-- Insert analytics code here -->
        
        <link rel="stylesheet" href="https://tightenco.github.io/jigsaw-blog-skeleton/assets/css/main.css?id=7915b88e798161c5f30e">
    </head>
    <body>
        <div class="bg-grey-lighter mb-8">
    <header class="container mx-auto px-4">
        <div class="sm:flex">
            <a href="https://tightenco.github.io/jigsaw-blog-skeleton/" class="inline-flex items-center w-full pt-4 pb-2 sm:py-6 w-full font-bold">
                <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 410.6 410.6" class="w-12"><title>Artboard 1</title><circle cx="205.3" cy="205.3" r="205.3" transform="translate(-84.99 210.37) rotate(-46)" style="fill:#fff79b"/><polyline points="162.79 371.18 47.34 230.44 240.09 72.33 367.51 227.66 367.48 290.29 367.48 290.29 260.57 377.99" style="fill:#ffdb76"/><path d="M140.33,101.27a16.85,16.85,0,0,0-28.57-7.85,17.36,17.36,0,0,0-4.45,8.49Z" style="fill:#d1d3d4"/><path d="M93.74,247.7,73.44,260.08l13.83,10.15a3.71,3.71,0,0,1,1.47,3.37,3.36,3.36,0,0,1-2.28,2.8l-14.83,5.42,13.76,10.37a3.62,3.62,0,0,1,1.4,3.16,3.49,3.49,0,0,1-1.93,2.86L68.6,306.56l12.95,12.5,33.58-.66-.39-70.71Z" style="fill:#fff"/><polygon points="206.37 136.68 176.88 137.27 177.09 156.78 206.28 156.34 206.37 136.68" style="fill:#fff"/><polygon points="328.56 201.03 328.56 201.03 328.61 199.4 293.73 198.95 294 218.53 328.63 217.22 328.56 201.03" style="fill:#fff"/><path d="M267.66,123.45a59.41,59.41,0,0,0-43.08-16.86l-80.1,1.75h0l-24.11.49-30.82.68.71,52.68,13.22-.16a40.69,40.69,0,0,1,41.24,40.79l-.09,19.1,142.46,1.33-1-57.55A60.16,60.16,0,0,0,267.66,123.45Zm-10.78,63.27-83-.74a3.47,3.47,0,0,1-2.49-1,3.58,3.58,0,0,1-1-2.53l-.71-48.64a3.5,3.5,0,0,1,3.47-3.6l36.76-.78h0l19.87-.42A29.27,29.27,0,0,1,251,137.25a29.58,29.58,0,0,1,9.06,20.85l.44,25a3.19,3.19,0,0,1-1.09,2.56A3.41,3.41,0,0,1,256.89,186.72Z" style="fill:#ffd400"/><path d="M260.06,158.09A29.41,29.41,0,0,0,251,137.25,29.1,29.1,0,0,0,229.78,129l-19.87.42h0l-36.76.78a3.5,3.5,0,0,0-3.47,3.6l.71,48.64a3.58,3.58,0,0,0,1,2.53,3.47,3.47,0,0,0,2.49,1l83,.81a3.58,3.58,0,0,0,2.53-1,4,4,0,0,0,1.09-2.56Zm-83.18-20.83,29.55-.66v19.73l-29.34.44Zm.58,41.57-.19-14.92,32.74-.5a3.59,3.59,0,0,0,3.55-3.53l0-23.34L230,136.2a22.39,22.39,0,0,1,16.16,6.29,22.07,22.07,0,0,1,6.85,15.79l.37,21.35Z" style="fill:#693300"/><path d="M382.88,213.3l-47.09.4,0-9.19,46.6-.46a3.54,3.54,0,1,0-.12-7.07l-46.46.46,0-1.49a3.59,3.59,0,0,0-3.53-3.55l-38.62-.46-.53-26.37a67.36,67.36,0,0,0-68.76-66.13l-76.84,1.69a24,24,0,0,0-40.89-12.65,23.68,23.68,0,0,0-6.48,13.62L86,102.43a3.5,3.5,0,0,0-3.47,3.6l.77,56.21-18,.24a3.5,3.5,0,0,0-3.47,3.6l.3,78a3.63,3.63,0,0,0,1.11,2.6,3.47,3.47,0,0,0,2.49,1l14.71,0-14.9,9.1a3.65,3.65,0,0,0-1.72,2.93,3.73,3.73,0,0,0,1.4,3l12.75,9.4-14.76,5.35a3.35,3.35,0,0,0-2.28,2.8,3.72,3.72,0,0,0,1.33,3.37l14.4,10.85-15.63,8a3.34,3.34,0,0,0-1.86,2.65,3.65,3.65,0,0,0,1,3.09l17.62,17a3.25,3.25,0,0,0,2.56.95l38.53-.74a3.5,3.5,0,0,0,3.47-3.6l-.45-74.25,19,0a3.5,3.5,0,0,0,3.55-3.53l0-15,146.14,1.41a3.58,3.58,0,0,0,2.53-1,4,4,0,0,0,1.09-2.56l0-1.13,38.16-1.51a3.54,3.54,0,0,0,3.41-3.38l47.23-.4a3.61,3.61,0,0,0-.13-7.21ZM135.59,93.08a16.19,16.19,0,0,1,4.67,8.26l-33.09.72a16.52,16.52,0,0,1,4.45-8.49A17,17,0,0,1,135.59,93.08ZM115.06,318.47l-33.58.66-12.95-12.5,16.26-8.35a3.49,3.49,0,0,0,1.93-2.86,3.62,3.62,0,0,0-1.4-3.16L71.56,281.89l14.83-5.42a3.35,3.35,0,0,0,2.28-2.8,3.71,3.71,0,0,0-1.47-3.37L73.37,260.15l20.29-12.38h20.86Zm22.19-77.83-19.17,0h0l-49.22-.13-.32-70.93L83,169.39,83.86,225a3.58,3.58,0,0,0,1,2.53,3.47,3.47,0,0,0,2.49,1l49.87.47ZM90.32,169.33l13.22-.16a33.12,33.12,0,0,1,23.71,9.42,33.51,33.51,0,0,1,10.25,24.22l0,19L91,221.44Zm54.17,52.59.09-19.1A40.69,40.69,0,0,0,103.34,162l-13.22.16-.71-52.68,30.82-.68,24.11-.49h0l80.1-1.75a60.24,60.24,0,0,1,61.5,59.11l1,57.55ZM294,218.53,293.66,199l34.87.45,0,1.56h0l.07,16.19Z" style="fill:#693300"/><path d="M137.33,229l.09-7.14,0-19a33.57,33.57,0,0,0-34-33.64l-13.08.16-.07-.07-7.07.12-14.49.18.32,70.93,49.22.13h0l19.17,0Z" style="fill:#ffd400"/></svg>
                <span class="pl-4">
                    My Blog About Jigsaws
                </span>
            </a>

            <nav class="sm:flex sm:flex-wrap sm:justify-end lg:w-full">
                <a href="https://tightenco.github.io/jigsaw-blog-skeleton/" class="lg:flex items-center p-2 sm:p-4 hidden">
                    Home
                </a>
                <a href="https://tightenco.github.io/jigsaw-blog-skeleton/blog" class="flex items-center p-2 sm:p-4">
                    Blog
                </a>
                <a href="https://tightenco.github.io/jigsaw-blog-skeleton/about" class="flex items-center p-2 sm:p-4">
                    About
                </a>
                <a href="https://tightenco.github.io/jigsaw-blog-skeleton/contact" class="flex items-center p-2 sm:p-4">
                    Contact
                </a>

                <form action="https://google.com/search" method="get" class="flex items-center px-2">
                    <fieldset role="search">
                        <input type="hidden" name="sitesearch" value="jigsaw-blog-skeleton.text">
                        <input type="text" name="q" results="0" placeholder="Search" class="p-1 border border-grey-dark my-4 sm:mt-0 lg:mb-0">
                    </fieldset>
                </form>
            </nav>
        </div>
    </header>
</div>

        <div class="container mx-auto px-4 pb-8 content">
            <div class="mx-auto w-full lg:w-3/4">
                    <h1 class="page-title">Auto-Tuned Façades in Laravel 97</h1>
    <p class="mb-6 text-grey-darker">By Matt Stauffer • May 23, 2017
            • Posted in:
                    <a href="https://tightenco.github.io/jigsaw-blog-skeleton/blog/categories/laravel">laravel</a>
                        |
                                <a href="https://tightenco.github.io/jigsaw-blog-skeleton/blog/categories/profundity">profundity</a>
                            </p>

    <div class="markdown pb-8 mb-8 border-b">
        <p>Laravel 97 introduced a new feature called &quot;auto-tuned facades”, which provide the convenience of facades, defined real-time instead of in classes. Taylor <a href="https://twitter.com/taylorotwell/status/814944242158149632">tweeted</a> about it, but I wanted to explain what they are and how they work.</p>
<p>I also want to have a bulleted list and a numbered list and an image, just to prove this all works.</p>
<p>Here's the list of reasons why Façades are great:</p>
<ul>
<li>First item of a bulleted list</li>
<li>And second
<ul>
<li>MORE SECOND</li>
</ul></li>
<li><a href="https://www.google.com/">And third</a></li>
</ul>
<p>Another list with a subhead:</p>
<h3>Greatest list ever!</h3>
<ul>
<li>First</li>
<li>Second</li>
</ul>
<p>Here's the order of operations:</p>
<ol>
<li>First item
<ul>
<li>A</li>
<li>B</li>
<li>C</li>
</ul></li>
<li>Not third item
<ol>
<li>Bahaha</li>
</ol></li>
<li>Not second item</li>
</ol>
<p>Hooray!</p>
<h2>A quick introduction to facades in Laravel</h2>
<blockquote>
<p>Already know how facades work? Skip to <a href="#whats-new">what’s new</a>.</p>
</blockquote>
<p>If you’re not familiar with facades in Laravel, they’re shortcut classes that provide static access to non-static methods on service classes bound to Laravel’s container. Phew, that’s a mouthful; let’s take a look at some real code.</p>
<p>For instance, if I want get something from the session, here’s one way to do it in Laravel:</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Session\SessionManager;

class ThingController extends Controller
{
    protected $session;

    public function __construct(SessionManager $session)
    {
        $this-&gt;session = $session;
    }

    public function doThing()
    {
        $importantValue = $this-&gt;session-&gt;get('important');
    }
}</code></pre>
<p>… or in a view:</p>
<pre><code class="language-php">Your user ID is: {{ app('Illuminate\Session\SessionManager')-&gt;get('important') }}</code></pre>
<p>However, this means you have to inject a session instance anywhere you’re going to use it. This isn’t a big issue, but especially in views and sometimes controllers (especially before controllers were namespaced), this hasn’t always the most convenient. The <code>app()</code> helper also makes it easier, as you can see in the view example. But facades make that even easier:</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Support\Facades\Session;

public function ThingController extends Controller
{
    public function doThing()
    {
        $importantValue = Session::get('important');
    }
}</code></pre>
<p>… or in a view:</p>
<pre><code class="language-php">Your user ID is: {{ Session::get('important') }}</code></pre>
<p>The facade works like this: </p>
<pre><code class="language-php">class Session extends Facade
{
    protected static function getFacadeAccessor()
    {
        return 'session';
    }
}</code></pre>
<p>This is telling the container this: “When I use a static method on the <code>Session</code>  facade, call it on an instance of <code>app('session')</code>”. The facade functionality pulls an instance out of the container and calls the method directly on that.</p>
<blockquote>
<p>Note: Here's a longer note that's an inline blockquote, as opposed to a blockquote that's right under a header.</p>
</blockquote>
<p>Good? Good. Let’s cover what a real-time facade is.</p>
<p><a id="whats-new"></a></p>
<h2>Introducing real-time facades</h2>
<p>Real-time facades let you create your own facades on the fly. Instead of having to create a facade class like the <code>Session</code> facade class I referenced above, you can use a class as its own facade by adding <code>Facades\</code> to the beginning of its own namespace.</p>
<p>Let’s say I have a class called Charts that has a <code>burndown()</code> method:</p>
<pre><code class="language-php">&lt;?php

namespace App;

class Charts
{
    protected $dep;

    public function __construct(SomeDependency $dep)
    {
        $this-&gt;dep = $dep;
    }

    public function burndown()
    {
        return 'stuff here' . $this-&gt;dep-&gt;stuff();
    }
}</code></pre>
<p>There’s nothing special about this class. Here’s how we would normally use it in a view:</p>
<pre><code class="language-php">&lt;h2&gt;Burndown&lt;/h2&gt;
{{ app(App\Charts::class)-&gt;burndown() }}</code></pre>
<p>Now, let’s make it a facade, just by changing the namespace:</p>
<pre><code class="language-php">&lt;h2&gt;Burndown&lt;/h2&gt;
{{ Facades\App\Charts::burndown() }}</code></pre>
<p>Or, in a class, from this:</p>
<pre><code class="language-php">&lt;?php

namespace App\Stuff;

use App\Charts;

class ThingDoer
{
    private $charts;

    public function __construct(Charts $charts)
    {
        $this-&gt;charts = $charts;
    }

    public function doThing()
    {
        $this-&gt;charts-&gt;burndown();
    }
}</code></pre>
<p>to this:</p>
<pre><code class="language-php">&lt;?php

namespace App\Stuff;

use Facades\App\Charts;

class ThingDoer
{
    public function doThing()
    {
        Charts::burndown();
    }
}</code></pre>
<h2>Post::conclude()</h2>
<p>That’s all. Just a quick and simple way to create a facade on the fly. One more tool in your terseness arsenal.</p>
<p>You might be asking yourself, &quot;why all the fuss for something so simple?&quot; In terms of its terseness, it definitely has a lot of value in some contexts and negligible impact in others. What if I told you, though, that you could use real-time façades to make your code <em>more</em> testable?</p>
<p>Taylor <a href="https://medium.com/@taylorotwell/expressive-code-real-time-facades-41c442914291">wrote a great post</a> explaining how he uses real-time facades in his Forge code, and how it's now more testable as a result.</p>    </div>

    
            <p>Read my next post:
            <a href="https://tightenco.github.io/jigsaw-blog-skeleton/blog/my-first-blog-post">My First Blog Post</a>
        </p>
                </div>
        </div>

        <footer class="border-t container mx-auto px-4 py-4 mt-8">
    <p>
        &copy; Matt Stauffer. Built with <a href="http://jigsaw.tighten.co">Jigsaw</a> and <a href="https://tailwindcss.com">Tailwind CSS</a>.
    </p>
</footer>
    </body>
</html>
